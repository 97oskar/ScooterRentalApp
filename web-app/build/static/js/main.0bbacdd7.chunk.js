(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{13:function(e,t,a){e.exports={"edit-form":"Edit_edit-form__2Q8bD","edit-header":"Edit_edit-header__20N1P","edit-input-area":"Edit_edit-input-area__NZQTX","edit-input":"Edit_edit-input__34ood","edit-button":"Edit_edit-button__3-Uoa","edit-delete-button":"Edit_edit-delete-button__1EdTi"}},135:function(e,t,a){e.exports=a.p+"static/media/homePage1.9293072b.jpeg"},136:function(e,t,a){e.exports=a.p+"static/media/homePage2.2cd37c2f.jpg"},141:function(e,t,a){e.exports=a(325)},146:function(e,t,a){},17:function(e,t,a){e.exports={"registration-navbar":"Registration_registration-navbar__3j3xJ","registration-form":"Registration_registration-form__1MWIV","registration-input-area":"Registration_registration-input-area__wbplC","registration-input":"Registration_registration-input__2vViR","registration-button":"Registration_registration-button__RqQO5"}},20:function(e,t,a){e.exports={"home-image":"Home_home-image__2Rp8j","home-image-header":"Home_home-image-header___3SsJ","home-image-text":"Home_home-image-text__rQghl","home-locations-header":"Home_home-locations-header__1REmM","home-article-text":"Home_home-article-text__1v2ON","home-footer":"Home_home-footer__zZNUW","home-footer-text":"Home_home-footer-text__1B62E","home-footer-image":"Home_home-footer-image__3VpgT","home-footer-description":"Home_home-footer-description__1y6D1"}},24:function(e,t,a){e.exports={"history-header":"RideHistory_history-header__19RYI","history-list":"RideHistory_history-list__32uCz","history-list-item":"RideHistory_history-list-item__zgZir","history-list-item-data":"RideHistory_history-list-item-data__2k72D","history-list-item-cost":"RideHistory_history-list-item-cost__2HPoW"}},25:function(e,t,a){e.exports={"rental-map":"Rental_rental-map__1nhUH","description-on-top":"Rental_description-on-top__39VKX","rent-button":"Rental_rent-button__1jQAu","start-rent-button":"Rental_start-rent-button__swn_C"}},27:function(e,t,a){e.exports={"login-navbar":"Login_login-navbar__3EKm1","login-form":"Login_login-form__31pRJ","login-input-area":"Login_login-input-area__6Lopt","login-input":"Login_login-input__1BHB-","login-button":"Login_login-button__13BmJ"}},31:function(e,t,a){e.exports={dashboard:"Dashboard_dashboard__2iBgm","dashboard-sidebar":"Dashboard_dashboard-sidebar__231_S","dashboard-sidebar-buttons":"Dashboard_dashboard-sidebar-buttons__ZYN9t","dashboard-content":"Dashboard_dashboard-content__17_Sv"}},325:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),l=a(36),o=a.n(l),i=(a(146),a(2)),s=a(3),c=a(5),d=a(4),m=a(6),u=a(329),p=a(37),h=a.n(p),b=a(327),f=function(e){function t(){return Object(i.a)(this,t),Object(c.a)(this,Object(d.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){return r.a.createElement(b.a,{to:this.props.path,onClick:this.props.handleClick},this.props.text)}}]),t}(r.a.Component),g=function(e){function t(){return Object(i.a)(this,t),Object(c.a)(this,Object(d.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){return r.a.createElement(r.a.Fragment,null,r.a.createElement("nav",{className:h.a.navbar},r.a.createElement("div",{className:h.a["nav-logo"]},r.a.createElement("h1",null,"RIDE.")),r.a.createElement("div",{className:h.a["navbar-buttons"]},r.a.createElement("div",{className:h.a["nav-links"]},r.a.createElement(f,{path:"/",text:"Home"})),r.a.createElement("div",{className:h.a["nav-links"]},r.a.createElement(f,{path:"/login",text:"Sign in"})),r.a.createElement("div",{className:h.a["nav-links"]},r.a.createElement(f,{path:"/registration",text:"Sign up"})))))}}]),t}(r.a.Component),E=a(8),v=a.n(E),_=a(15),k=function(e){function t(){var e,a;Object(i.a)(this,t);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return(a=Object(c.a)(this,(e=Object(d.a)(t)).call.apply(e,[this].concat(r)))).state={markers:null},a}return Object(m.a)(t,e),Object(s.a)(t,[{key:"componentDidMount",value:function(){var e=this;v()({method:"get",url:"http://localhost:5000/scootersLocations"}).then(function(t){t.data&&e.setState({markers:t.data.scooters.map(function(e){return r.a.createElement(_.Marker,{key:e.numer,name:e.numer,position:{lat:e.polozenie.lat,lng:e.polozenie.lng}})})})}).catch(function(e){e.response?alert(e.response.data.message):e.request?console.log(e.request):console.log("Error",e.message)})}},{key:"render",value:function(){return r.a.createElement(_.Map,{google:this.props.google,style:{width:"100%",height:"70%"},zoom:13,initialCenter:{lat:50.058683,lng:19.944544}},this.state.markers)}}]),t}(r.a.Component),w=Object(_.GoogleApiWrapper)({apiKey:"AIzaSyBaFSTogS0eS_ahQwISoQaD__r2g3KVlFg"})(k),j=a(20),y=a.n(j),O=a(135),C=a.n(O),N=a(136),S=a.n(N),x=function(e){function t(){return Object(i.a)(this,t),Object(c.a)(this,Object(d.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){return r.a.createElement("div",null,r.a.createElement(g,null),r.a.createElement("img",{src:C.a,className:y.a["home-image"],alt:"Title"}),r.a.createElement("h1",{className:y.a["home-image-header"]},"Electric scooters for Everyone"),r.a.createElement("h3",{className:y.a["home-image-text"]},"the urban future of mobility."),r.a.createElement("h1",{className:y.a["home-locations-header"]},"Current scooters locations in Cracow"),r.a.createElement("p",{className:y.a["home-article-text"]},"Put away the vehicles. ",r.a.createElement("br",null),"Choose scooters and help the city catch its breath. Get the app and ride."),r.a.createElement("div",{className:y.a["home-locations-map"]},r.a.createElement(w,null)),r.a.createElement("footer",{className:y.a["home-footer"]},r.a.createElement("p",{className:y.a["home-footer-text"]},"Oskar Szewczyk 2019.",r.a.createElement("br",null),"AGH University of Science and Technology",r.a.createElement("br",null),"All rights reserved."),r.a.createElement("img",{src:S.a,className:y.a["home-footer-image"],alt:"Scooter"}),r.a.createElement("p",{className:y.a["home-footer-description"]},"Take a ",r.a.createElement("b",null,"RIDE."))))}}]),t}(r.a.Component),R=a(330),I=a(14),P=a(9),A=a(27),W=a.n(A),F=a(66),T=function(e){var t=e.name,a=(e.label,e.formikProps),n=e.formikKey,l=e.areaClass,o=Object(F.a)(e,["name","label","formikProps","formikKey","areaClass"]);return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:l},r.a.createElement(I.a,Object.assign({type:n,name:t},o))),a.touched[t]&&a.errors[t]?r.a.createElement("p",{style:{color:"red"}},a.errors[t]):r.a.createElement("p",null,"\xa0"))},D=function(e){function t(){var e,a;Object(i.a)(this,t);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return(a=Object(c.a)(this,(e=Object(d.a)(t)).call.apply(e,[this].concat(r)))).state={fireRedirect:!1},a}return Object(m.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){var e=this;return r.a.createElement("div",null,r.a.createElement(I.b,{initialValues:{email:"",password:""},onSubmit:function(t,a){v.a.post("http://localhost:5000/login",{email:t.email,password:t.password}).then(function(t){t.data&&(localStorage.setItem("userToken",t.data.token),e.setState({fireRedirect:!0}))}).catch(function(e){a.setFieldError("general",e.response.data.message)}).finally(function(){a.setSubmitting(!1)})},validationSchema:P.object().shape({email:P.string().label("Email").email().required(),password:P.string().label("Password").required().min(7,"Seems a bit short...")})},function(e){return r.a.createElement(r.a.Fragment,null,r.a.createElement(T,{name:"email",label:"Email address",formikProps:e,formikKey:"email",placeholder:"Email",className:W.a["login-input"],areaClass:W.a["login-input-area"],autoFocus:!0}),r.a.createElement(T,{name:"password",label:"Password",formikProps:e,formikKey:"password",placeholder:"Password",className:W.a["login-input"],areaClass:W.a["login-input-area"]}),r.a.createElement("button",{type:"submit",className:W.a["login-button"],onClick:e.handleSubmit},"Sign in"),r.a.createElement("p",{style:{color:"red"}},e.errors.general))}),this.state.fireRedirect&&r.a.createElement(R.a,{to:"/dashboard/rental"}))}}]),t}(r.a.Component),q=function(e){function t(){return Object(i.a)(this,t),Object(c.a)(this,Object(d.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:W.a["login-navbar"]},r.a.createElement(g,null)),r.a.createElement("div",{className:W.a["login-form"]},r.a.createElement("h1",null,"Login"),r.a.createElement(D,null)))}}]),t}(r.a.Component),M=a(17),z=a.n(M),K=function(e){function t(){var e,a;Object(i.a)(this,t);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return(a=Object(c.a)(this,(e=Object(d.a)(t)).call.apply(e,[this].concat(r)))).state={fireRedirect:!1},a}return Object(m.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){var e=this;return r.a.createElement("div",null,r.a.createElement(I.b,{initialValues:{name:"",surname:"",email:"",password:""},onSubmit:function(t,a){v.a.post("http://localhost:5000/registerUser",{name:t.name,surname:t.surname,email:t.email,password:t.password}).then(function(t){t.data&&(localStorage.setItem("userToken",t.data.token),e.setState({fireRedirect:!0}))}).catch(function(e){a.setFieldError("general",e.response.data.message)}).finally(function(){a.setSubmitting(!1)})},validationSchema:P.object().shape({name:P.string().label("Name").max(20).required(),surname:P.string().label("Surname").max(30).required(),email:P.string().label("Email").email().required(),password:P.string().label("Password").required().min(7,"Seems a bit short...")})},function(e){return r.a.createElement(r.a.Fragment,null,r.a.createElement(T,{name:"name",label:"Name",formikProps:e,formikKey:"text",placeholder:"Name",className:z.a["registration-input"],areaClass:z.a["registration-input-area"],autoFocus:!0}),r.a.createElement(T,{name:"surname",label:"Surname",formikProps:e,formikKey:"text",placeholder:"Surname",className:z.a["registration-input"],areaClass:z.a["registration-input-area"]}),r.a.createElement(T,{name:"email",label:"Email address",formikProps:e,formikKey:"email",placeholder:"Email",className:z.a["registration-input"],areaClass:z.a["registration-input-area"]}),r.a.createElement(T,{name:"password",label:"Password",formikProps:e,formikKey:"password",placeholder:"Password",className:z.a["registration-input"],areaClass:z.a["registration-input-area"]}),r.a.createElement("button",{type:"submit",className:z.a["registration-button"],onClick:e.handleSubmit},"Sign up"),r.a.createElement("p",{style:{color:"red"}},e.errors.general))}),this.state.fireRedirect&&r.a.createElement(R.a,{to:"/dashboard/rental"}))}}]),t}(r.a.Component),H=function(e){function t(){return Object(i.a)(this,t),Object(c.a)(this,Object(d.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:z.a["registration-navbar"]},r.a.createElement(g,null)),r.a.createElement("div",{className:z.a["registration-form"]},r.a.createElement("h1",null,"Registration"),r.a.createElement(K,null)))}}]),t}(r.a.Component),L=function(e){function t(){return Object(i.a)(this,t),Object(c.a)(this,Object(d.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){return r.a.createElement(b.a,{to:this.props.path},this.props.text)}}]),t}(r.a.Component),V=a(53),U=a.n(V),Q=function(e){function t(){var e,a;Object(i.a)(this,t);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return(a=Object(c.a)(this,(e=Object(d.a)(t)).call.apply(e,[this].concat(r)))).removeToken=function(){localStorage.removeItem("userToken")},a}return Object(m.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){return r.a.createElement(r.a.Fragment,null,r.a.createElement("nav",{className:U.a.navbar},r.a.createElement("div",{className:U.a["nav-logo"]},r.a.createElement("h1",null,"RIDE.")),r.a.createElement("div",{className:U.a["navbar-buttons"]},r.a.createElement("div",{className:U.a["nav-links"]},r.a.createElement(f,{path:"/",text:"Logout",handleClick:this.removeToken})))))}}]),t}(r.a.Component),B=a(52),Y=function(e){function t(e){var a;return Object(i.a)(this,t),(a=Object(c.a)(this,Object(d.a)(t).call(this,e))).infoWindowRef=r.a.createRef(),a.onInfoWindowOpen=a.onInfoWindowOpen.bind(Object(B.a)(Object(B.a)(a))),a.containerElement||(a.containerElement=document.createElement("div")),a}return Object(m.a)(t,e),Object(s.a)(t,[{key:"onInfoWindowOpen",value:function(){o.a.render(r.a.Children.only(this.props.children),this.containerElement),this.infoWindowRef.current.infowindow.setContent(this.containerElement)}},{key:"render",value:function(){return r.a.createElement(_.InfoWindow,Object.assign({onOpen:this.onInfoWindowOpen,ref:this.infoWindowRef},this.props))}}]),t}(r.a.Component),G=a(25),J=a.n(G),Z=function(e){function t(){var e,a;Object(i.a)(this,t);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return(a=Object(c.a)(this,(e=Object(d.a)(t)).call.apply(e,[this].concat(r)))).state={showingInfoWindow:!1,activeMarker:{},selectedPlace:{},markers:null},a.handleSubmit=function(e){e.preventDefault(),v()({method:"post",url:"http://localhost:5000/startRental",data:{scooterId:a.state.selectedPlace.name},headers:{"x-access-token":localStorage.getItem("userToken")}}).then(function(e){return a.props.startRental(a.state.selectedPlace.name)}).catch(function(e){e.response?alert(e.response.data.message):e.request?console.log(e.request):console.log("Error",e.message)})},a.onMarkerClick=function(e,t,n){a.setState({selectedPlace:e,activeMarker:t,showingInfoWindow:!0})},a.onMapClicked=function(e,t,n){a.setState.showingInfoWindow&&a.setState({showingInfoWindow:!1,activeMarker:null})},a}return Object(m.a)(t,e),Object(s.a)(t,[{key:"componentDidMount",value:function(){var e=this;v()({method:"get",url:"http://localhost:5000/scootersLocations",headers:{"x-access-token":localStorage.getItem("userToken")}}).then(function(t){t.data&&e.setState({markers:t.data.scooters.map(function(t){return r.a.createElement(_.Marker,{key:t.numer,name:t.numer,position:{lat:t.polozenie.lat,lng:t.polozenie.lng},onClick:e.onMarkerClick})})})}).catch(function(e){e.response?alert(e.response.data.message):e.request?console.log(e.request):console.log("Error",e.message)})}},{key:"render",value:function(){return r.a.createElement("div",{className:J.a["rental-map"]},r.a.createElement(_.Map,{google:this.props.google,style:{width:"100%",height:"100%"},zoom:13,initialCenter:{lat:50.058683,lng:19.944544},onClick:this.onMapClicked},this.state.markers,r.a.createElement(Y,{marker:this.state.activeMarker,visible:this.state.showingInfoWindow},r.a.createElement(r.a.Fragment,null,r.a.createElement("button",{type:"button",className:J.a["rent-button"],onClick:this.handleSubmit},"click to rent")))))}}]),t}(r.a.Component),X=Object(_.GoogleApiWrapper)({apiKey:"AIzaSyBaFSTogS0eS_ahQwISoQaD__r2g3KVlFg"})(Z),$=function(e){function t(){return Object(i.a)(this,t),Object(c.a)(this,Object(d.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){return r.a.createElement("h1",{className:J.a["description-on-top"]},this.props.txt)}}]),t}(r.a.Component),ee=function(e){function t(){return Object(i.a)(this,t),Object(c.a)(this,Object(d.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){return r.a.createElement(r.a.Fragment,null,r.a.createElement($,{txt:"Click on marker to rent a scooter"}),r.a.createElement(X,{startRental:this.props.startRental}))}}]),t}(r.a.Component),te=function(e){function t(){var e,a;Object(i.a)(this,t);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return(a=Object(c.a)(this,(e=Object(d.a)(t)).call.apply(e,[this].concat(r)))).handleClick=function(e){e.preventDefault(),a.props.position&&v()({method:"post",url:"http://localhost:5000/endRental",data:{scooterId:a.props.scooterId,lat:a.props.position.lat.toString(),lng:a.props.position.lng.toString()},headers:{"x-access-token":localStorage.getItem("userToken")}}).then(function(e){if(e.data)return a.props.endRental()}).catch(function(e){e.response&&alert(e.response.data.message)})},a}return Object(m.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){return r.a.createElement("button",{className:J.a["rent-button"],onClick:this.handleClick},"Click to finish rental")}}]),t}(r.a.Component),ae=function(e){function t(){var e,a;Object(i.a)(this,t);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return(a=Object(c.a)(this,(e=Object(d.a)(t)).call.apply(e,[this].concat(r)))).state={marker:{position:null,visible:!1}},a.handleClick=function(e,t,n){var r=n.latLng,l=r.lat(),o=r.lng();return a.setState({marker:{position:{lat:l,lng:o},visible:!0}}),a.props.setPosition(l,o)},a}return Object(m.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){return r.a.createElement(_.Map,{google:this.props.google,style:{width:"100%",height:"100%"},className:J.a["rental-map"],zoom:13,initialCenter:{lat:50.058683,lng:19.944544},onClick:this.handleClick},r.a.createElement(_.Marker,{position:this.state.marker.position,visible:!1}),r.a.createElement(Y,{position:this.state.marker.position,visible:this.state.marker.visible},r.a.createElement(te,{scooterId:this.props.scooterId,position:this.state.marker.position,endRental:this.props.endRental})))}}]),t}(r.a.Component),ne=Object(_.GoogleApiWrapper)({apiKey:"AIzaSyBaFSTogS0eS_ahQwISoQaD__r2g3KVlFg"})(ae),re=function(e){function t(){var e,a;Object(i.a)(this,t);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return(a=Object(c.a)(this,(e=Object(d.a)(t)).call.apply(e,[this].concat(r)))).state={position:null},a.setPosition=function(e,t){a.setState({position:{lat:e,lng:t}})},a}return Object(m.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){return r.a.createElement(r.a.Fragment,null,r.a.createElement($,{txt:"To finish rental choose your position on map"}),r.a.createElement(ne,{setPosition:this.setPosition,scooterId:this.props.scooterId,position:this.state.position,endRental:this.props.endRental}))}}]),t}(r.a.Component),le=function(e){function t(){var e,a;Object(i.a)(this,t);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return(a=Object(c.a)(this,(e=Object(d.a)(t)).call.apply(e,[this].concat(r)))).state={isRented:null,scooterId:null},a.startRental=function(e){a.setState({isRented:!0,scooterId:e})},a.endRental=function(){a.setState({isRented:!1,scooterId:null})},a}return Object(m.a)(t,e),Object(s.a)(t,[{key:"componentDidMount",value:function(){var e=this;v()({method:"get",url:"http://localhost:5000/userRentalStatus",headers:{"x-access-token":localStorage.getItem("userToken")}}).then(function(t){"true"===t.data.isRented?e.setState({isRented:!0,scooterId:t.data.scooterId}):e.setState({isRented:!1})})}},{key:"render",value:function(){return r.a.createElement("div",null,this.state.isRented?r.a.createElement("div",null,r.a.createElement(re,{endRental:this.endRental,scooterId:this.state.scooterId})):r.a.createElement(ee,{startRental:this.startRental}))}}]),t}(r.a.Component),oe=a(7),ie=a.n(oe),se=function(e){function t(){return Object(i.a)(this,t),Object(c.a)(this,Object(d.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){var e=this;return r.a.createElement("div",null,r.a.createElement(I.b,{initialValues:{amount:"",result:""},onSubmit:function(t,a){v()({method:"post",url:"http://localhost:5000/prePaid",data:{amount:t.amount},headers:{"x-access-token":localStorage.getItem("userToken")}}).then(function(a){return t.result=a.data.message,e.props.handlePrepaid(t.amount)}).catch(function(e){a.setFieldError("general",e.response.data.message)}).finally(function(){a.setSubmitting(!1)})},validationSchema:P.object().shape({amount:P.string().required("Please enter a value")})},function(e){return r.a.createElement(r.a.Fragment,null,r.a.createElement(T,{name:"amount",label:"Prepaid amount",formikProps:e,formikKey:"text",placeholder:"Amount",className:ie.a["wallet-prepaid-input"],areaClass:ie.a["wallet-prepaid-input-area"],autoFocus:!0}),r.a.createElement("button",{type:"submit",className:ie.a["wallet-prepaid-button"],onClick:e.handleSubmit},"Transfer"),e.errors.general?r.a.createElement("p",{style:{color:"red"}},e.errors.general):e.values.result?r.a.createElement("p",{style:{color:"green"}},e.values.result):r.a.createElement("p",null,"\xa0"))}))}}]),t}(r.a.Component),ce=function(e){var t=e.name,a=(e.label,e.formikProps),n=e.formikKey,l=e.areaClass,o=Object(F.a)(e,["name","label","formikProps","formikKey","areaClass"]);return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:l},r.a.createElement(I.a,Object.assign({type:n,name:t},o))),r.a.createElement("div",{style:{color:"red"},className:ie.a["wallet-add-card-input-error"]},(a.touched[t]?a.errors[t]:r.a.createElement("p",{className:ie.a["wallet-add-card-input-error"]},"\xa0"))||r.a.createElement("p",{className:ie.a["wallet-add-card-input-error"]},"\xa0")))},de=function(e){function t(){return Object(i.a)(this,t),Object(c.a)(this,Object(d.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){var e=this;return r.a.createElement("div",null,r.a.createElement(I.b,{initialValues:{creditCardNumber:"",expirationDate:"",expirationMonth:"",expirationYear:"",cscNumber:""},onSubmit:function(t,a){v()({method:"post",url:"http://localhost:5000/addCreditCard",data:{creditCardNumber:t.creditCardNumber,expirationDate:"20"+t.expirationYear+"-"+t.expirationMonth+"-01",cscNumber:t.cscNumber},headers:{"x-access-token":localStorage.getItem("userToken")}}).then(function(t){return e.props.handleCardAdding()}).catch(function(e){a.setFieldError("general",e.response.data.message)}).finally(function(){a.setSubmitting(!1)})},validationSchema:P.object().shape({creditCardNumber:P.string().label("Credit card number").required(),expirationMonth:P.string("").label("").matches(/[0][0-9]|[1][0-2]/,{message:"Invalid"}).required("Invalid"),expirationYear:P.string("Invalid").label("").matches(/[0-9][0-9]/,{message:"Invalid"}).required("Invalid"),cscNumber:P.string("Invalid").label("").matches(/[0-9][0-9][0-9]/,{message:"Invalid"}).required("Invalid")})},function(e){return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:ie.a["wallet-add-card-form-border"]},r.a.createElement("div",null,r.a.createElement("label",{className:ie.a["wallet-add-card-label"]},"CREDIT CARD NUMBER"),r.a.createElement(ce,{name:"creditCardNumber",label:"Credit card number",formikProps:e,formikKey:"text",className:ie.a["wallet-add-card-input"],areaClass:ie.a["wallet-add-card-input-area-number"],autoFocus:!0})),r.a.createElement("div",{className:ie.a["wallet-add-card-row-second"]},r.a.createElement("div",{className:ie.a["wallet-add-card-row-second-expiration"]},r.a.createElement("label",{className:ie.a["wallet-add-card-label"]},"EXPIRATION DATE"),r.a.createElement("div",{className:ie.a["wallet-add-card-row-second-expiration-input"]},r.a.createElement("div",{className:ie.a["wallet-add-card-expiration-input"]},r.a.createElement(ce,{name:"expirationMonth",label:"Expiration month",formikProps:e,formikKey:"text",placeholder:"MM",className:ie.a["wallet-add-card-input"],areaClass:ie.a["wallet-add-card-input-area-expiration"]})),r.a.createElement("h1",null,"/"),r.a.createElement("div",{className:ie.a["wallet-add-card-expiration-input"]},r.a.createElement(ce,{name:"expirationYear",label:"Expiration year",formikProps:e,formikKey:"text",placeholder:"YY",className:ie.a["wallet-add-card-input"],areaClass:ie.a["wallet-add-card-input-area-expiration"]})))),r.a.createElement("div",{className:ie.a["wallet-add-card-row-second-csc"]},r.a.createElement("label",{className:ie.a["wallet-add-card-label"]},"CSC"),r.a.createElement(ce,{name:"cscNumber",label:"Csc number",formikProps:e,formikKey:"text",placeholder:"XXX",className:ie.a["wallet-add-card-input"],areaClass:ie.a["wallet-add-card-input-area-csc"]})))),r.a.createElement("button",{type:"submit",className:ie.a["wallet-add-card-button"],onClick:e.handleSubmit},"Add card"),r.a.createElement("p",{style:{color:"red"}},e.errors.general))}))}}]),t}(r.a.Component),me=function(e){function t(){var e,a;Object(i.a)(this,t);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return(a=Object(c.a)(this,(e=Object(d.a)(t)).call.apply(e,[this].concat(r)))).handleClick=function(){v()({method:"delete",url:"http://localhost:5000/removeCreditCard",headers:{"x-access-token":localStorage.getItem("userToken")}}).then(function(e){return a.props.handleCreditCardRemove()}).catch(function(e){alert(e.response.data.message)})},a}return Object(m.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){return r.a.createElement("button",{className:ie.a["wallet-delete-button"],onClick:this.handleClick},"remove credit card")}}]),t}(r.a.Component),ue=function(e){function t(){var e,a;Object(i.a)(this,t);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return(a=Object(c.a)(this,(e=Object(d.a)(t)).call.apply(e,[this].concat(r)))).state={isCardAdded:null,balance:null},a.handleCardAdding=function(){a.setState({isCardAdded:!0})},a.handleCreditCardRemove=function(){a.setState({isCardAdded:!1})},a.handlePrepaid=function(e){var t=a.addTwoAmounts(a.state.balance,e);a.setState({balance:t})},a.addTwoAmounts=function(e,t){return(parseFloat(e.replace(",","."))+parseFloat(t.replace(",","."))).toFixed(2).toString().replace(".",",")+" z\u0142"},a}return Object(m.a)(t,e),Object(s.a)(t,[{key:"componentDidMount",value:function(){var e=this;v()({method:"get",url:"http://localhost:5000/checkCard",headers:{"x-access-token":localStorage.getItem("userToken")}}).then(function(t){t.data&&("true"===t.data.isCardAdded?e.setState({isCardAdded:!0}):e.setState({isCardAdded:!1}))}),v()({method:"get",url:"http://localhost:5000/getBalance",headers:{"x-access-token":localStorage.getItem("userToken")}}).then(function(t){t.data&&e.setState({balance:t.data.balance})}).catch(function(e){e.response?alert(e.response.data.message):e.request?console.log(e.request):console.log("Error",e.message)})}},{key:"render",value:function(){return r.a.createElement(r.a.Fragment,null,r.a.createElement("h1",{className:ie.a["wallet-balance-header"]},"Wallet balance:"),r.a.createElement("h1",{className:ie.a["wallet-balance-amount"]},this.state.balance),this.state.isCardAdded?r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:ie.a["wallet-prepaid-form"]},r.a.createElement("h3",{className:ie.a["wallet-info-card"]},"Transfer money from your credit card to wallet"),r.a.createElement(se,{handlePrepaid:this.handlePrepaid})),r.a.createElement("div",{className:ie.a["wallet-delete-card"]},r.a.createElement("h3",null,"Remove the credit card from your wallet"),r.a.createElement(me,{handleCreditCardRemove:this.handleCreditCardRemove}))):r.a.createElement("div",{className:ie.a["wallet-add-card-form"]},r.a.createElement("h3",{className:ie.a["wallet-info-card"]},"Add your credit card"),r.a.createElement(de,{handleCardAdding:this.handleCardAdding})))}}]),t}(r.a.Component),pe=a(21),he=a.n(pe),be=a(44),fe=a(140),ge=a(24),Ee=a.n(ge),ve=Object(fe.openDb)("ride-store",1,function(e){e.createObjectStore("rides")}),_e={getAllRides:function(){var e=Object(be.a)(he.a.mark(function e(t){var a;return he.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ve;case 2:return a=e.sent,e.abrupt("return",a.transaction("rides").objectStore("rides").getAll());case 4:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}(),setRide:function(){var e=Object(be.a)(he.a.mark(function e(t,a){var n,r;return he.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ve;case 2:return n=e.sent,(r=n.transaction("rides","readwrite")).objectStore("rides").put(a,t),e.abrupt("return",r.complete);case 6:case"end":return e.stop()}},e,this)}));return function(t,a){return e.apply(this,arguments)}}()},ke=function(e){function t(){var e,a;Object(i.a)(this,t);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return(a=Object(c.a)(this,(e=Object(d.a)(t)).call.apply(e,[this].concat(r)))).state={rides:null},a.formatDate=function(e){return(e=new Date(e)).toLocaleString()},a}return Object(m.a)(t,e),Object(s.a)(t,[{key:"componentDidMount",value:function(){var e=this;v()({method:"get",url:"http://localhost:5000/getRideHistory",headers:{"x-access-token":localStorage.getItem("userToken")}}).then(function(){var t=Object(be.a)(he.a.mark(function t(a){var n;return he.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(!a.data){t.next=7;break}return a.data.rides.map(function(){var e=Object(be.a)(he.a.mark(function e(t){return he.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,_e.setRide(t.id_przejazdu,t);case 2:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()),console.log("Local database has been updated"),t.next=5,_e.getAllRides();case 5:n=t.sent,e.setState({rides:n.map(function(t){return r.a.createElement("li",{key:t.id_przejazdu,className:Ee.a["history-list-item"]},r.a.createElement("p",{className:Ee.a["history-list-item-data"]},e.formatDate(t.data_poczatku_wynajmu)),r.a.createElement("p",{className:Ee.a["history-list-item-cost"]},"cost: ",t.koszt))})});case 7:case"end":return t.stop()}},t,this)}));return function(e){return t.apply(this,arguments)}}()).catch(function(){var t=Object(be.a)(he.a.mark(function t(a){var n;return he.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return a.response?alert(a.response.data.message):a.request?console.log(a.request):console.log("Error",a.message),t.next=3,_e.getAllRides();case 3:n=t.sent,e.setState({rides:n.map(function(t){return r.a.createElement("li",{key:t.id_przejazdu,className:Ee.a["history-list-item"]},r.a.createElement("p",{className:Ee.a["history-list-item-data"]},e.formatDate(t.data_poczatku_wynajmu)),r.a.createElement("p",{className:Ee.a["history-list-item-cost"]},"cost: ",t.koszt))})});case 5:case"end":return t.stop()}},t,this)}));return function(e){return t.apply(this,arguments)}}())}},{key:"render",value:function(){return r.a.createElement("ul",{className:Ee.a["history-list"]},this.state.rides)}}]),t}(r.a.Component),we=function(e){function t(){return Object(i.a)(this,t),Object(c.a)(this,Object(d.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){return r.a.createElement("div",null,r.a.createElement("h1",{className:Ee.a["history-header"]},"Ride history"),r.a.createElement(ke,null))}}]),t}(r.a.Component),je=a(13),ye=a.n(je),Oe=function(e){function t(){var e,a;Object(i.a)(this,t);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return(a=Object(c.a)(this,(e=Object(d.a)(t)).call.apply(e,[this].concat(r)))).state={name:"",surname:"",email:"",result:""},a}return Object(m.a)(t,e),Object(s.a)(t,[{key:"componentDidMount",value:function(){var e=this;v()({method:"get",url:"http://localhost:5000/getUserData",headers:{"x-access-token":localStorage.getItem("userToken")}}).then(function(t){t.data&&e.setState({name:t.data.data.imie,surname:t.data.data.nazwisko,email:t.data.data.adres_email})})}},{key:"render",value:function(){var e=this;return r.a.createElement("div",null,r.a.createElement(I.b,{initialValues:{name:this.state.name,surname:this.state.surname,email:this.state.email,password:""},onSubmit:function(t,a){v()({method:"put",url:"http://localhost:5000/updateUser",data:{name:t.name,surname:t.surname,email:t.email,password:t.password},headers:{"x-access-token":localStorage.getItem("userToken")}}).then(function(a){e.setState({result:a.data.message}),t.password=""}).catch(function(e){a.setFieldError("general",e.response.data.message)}).finally(function(){a.setSubmitting(!1)})},validationSchema:P.object().shape({name:P.string().label("Name").max(20).required(),surname:P.string().label("Surname").max(30).required(),email:P.string().label("Email").email().required(),password:P.string().label("Password").required().min(7,"Seems a bit short...")}),enableReinitialize:!0},function(t){return r.a.createElement(r.a.Fragment,null,r.a.createElement(T,{name:"name",label:"Name",formikProps:t,formikKey:"text",className:ye.a["edit-input"],areaClass:ye.a["edit-input-area"],autoFocus:!0}),r.a.createElement(T,{name:"surname",label:"Surname",formikProps:t,formikKey:"text",className:ye.a["edit-input"],areaClass:ye.a["edit-input-area"]}),r.a.createElement(T,{name:"email",label:"Email address",formikProps:t,formikKey:"email",className:ye.a["edit-input"],areaClass:ye.a["edit-input-area"]}),r.a.createElement(T,{name:"password",label:"Password",formikProps:t,formikKey:"password",placeholder:"password",className:ye.a["edit-input"],areaClass:ye.a["edit-input-area"]}),r.a.createElement("button",{type:"submit",className:ye.a["edit-button"],onClick:t.handleSubmit},"Edit"),r.a.createElement("p",{style:{color:"red"}},t.errors.general,"\xa0"),r.a.createElement("p",{style:{color:"green"}},e.state.result,"\xa0"))}))}}]),t}(r.a.Component),Ce=function(e){function t(){var e,a;Object(i.a)(this,t);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return(a=Object(c.a)(this,(e=Object(d.a)(t)).call.apply(e,[this].concat(r)))).state={fireRedirect:!1},a.handleClick=function(){v()({method:"delete",url:"http://localhost:5000/deleteUser",headers:{"x-access-token":localStorage.getItem("userToken")}}).then(function(e){localStorage.removeItem("userToken"),a.setState({fireRedirect:!0})}).catch(function(e){alert(e.response.data.message)})},a}return Object(m.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){return r.a.createElement(r.a.Fragment,null,r.a.createElement("button",{className:ye.a["edit-delete-button"],onClick:this.handleClick},"Delete profile"),this.state.fireRedirect&&r.a.createElement(R.a,{to:"/"}))}}]),t}(r.a.Component),Ne=function(e){function t(){return Object(i.a)(this,t),Object(c.a)(this,Object(d.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){return r.a.createElement(r.a.Fragment,null,r.a.createElement("h1",{className:ye.a["edit-header"]},"Edit profile"),r.a.createElement("div",{className:ye.a["edit-form"]},r.a.createElement(Oe,null)),r.a.createElement(Ce,null))}}]),t}(r.a.Component),Se=a(31),xe=a.n(Se),Re=function(e){function t(){return Object(i.a)(this,t),Object(c.a)(this,Object(d.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){return r.a.createElement(r.a.Fragment,null,r.a.createElement(Q,null),r.a.createElement("div",{className:xe.a.dashboard},r.a.createElement("div",{className:xe.a["dashboard-sidebar"]},r.a.createElement("ul",null,r.a.createElement("li",{className:xe.a["dashboard-sidebar-buttons"]},r.a.createElement(L,{path:"/dashboard/rental",text:"Rent scooter"})),r.a.createElement("li",{className:xe.a["dashboard-sidebar-buttons"]},r.a.createElement(L,{path:"/dashboard/wallet",text:"Wallet"})),r.a.createElement("li",{className:xe.a["dashboard-sidebar-buttons"]},r.a.createElement(L,{path:"/dashboard/history",text:"Ride History"})),r.a.createElement("li",{className:xe.a["dashboard-sidebar-buttons"]},r.a.createElement(L,{path:"/dashboard/edit",text:"Edit Profile"})))),r.a.createElement("div",{className:xe.a["dashboard-content"]},r.a.createElement(u.a,{path:"/dashboard/rental",component:le}),r.a.createElement(u.a,{path:"/dashboard/wallet",component:ue}),r.a.createElement(u.a,{path:"/dashboard/history",component:we}),r.a.createElement(u.a,{path:"/dashboard/edit",component:Ne}))))}}]),t}(r.a.Component),Ie=function(e){function t(){return Object(i.a)(this,t),Object(c.a)(this,Object(d.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){return r.a.createElement("div",null,localStorage.getItem("userToken")?r.a.createElement(u.a,{path:this.props.path,component:Re}):r.a.createElement(R.a,{to:this.props.to}))}}]),t}(r.a.Component),Pe=function(e){function t(){return Object(i.a)(this,t),Object(c.a)(this,Object(d.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){return r.a.createElement("div",null,r.a.createElement(u.a,{exact:!0,path:"/",component:x}),r.a.createElement(u.a,{path:"/login",component:q}),r.a.createElement(u.a,{path:"/registration",component:H}),r.a.createElement(Ie,{path:"/dashboard",to:"/"}))}}]),t}(r.a.Component),Ae=a(328);o.a.render(r.a.createElement(Ae.a,null,r.a.createElement(Pe,null)),document.getElementById("root"))},37:function(e,t,a){e.exports={navbar:"UnloggedNav_navbar__EVpNI","navbar-buttons":"UnloggedNav_navbar-buttons__2_4qF","nav-links":"UnloggedNav_nav-links__1o8LY","nav-logo":"UnloggedNav_nav-logo__36Ep7"}},53:function(e,t,a){e.exports={navbar:"LoggedNav_navbar__1h59q","navbar-buttons":"LoggedNav_navbar-buttons__fCOUU","nav-links":"LoggedNav_nav-links__3quqt","nav-logo":"LoggedNav_nav-logo__2Vn8i"}},7:function(e,t,a){e.exports={"wallet-balance-header":"Wallet_wallet-balance-header__1v0kp","wallet-balance-amount":"Wallet_wallet-balance-amount__1Vga5","wallet-prepaid-form":"Wallet_wallet-prepaid-form__2T6ur","wallet-prepaid-input-area":"Wallet_wallet-prepaid-input-area__17M0N","wallet-prepaid-input":"Wallet_wallet-prepaid-input__2NQ1h","wallet-prepaid-button":"Wallet_wallet-prepaid-button__1_o5Z","wallet-delete-card":"Wallet_wallet-delete-card__1DNC8","wallet-delete-button":"Wallet_wallet-delete-button__qPKjS","wallet-add-card-form":"Wallet_wallet-add-card-form__1VxLl","wallet-add-card-form-border":"Wallet_wallet-add-card-form-border__11ux5","wallet-add-card-input":"Wallet_wallet-add-card-input__1-nmw","wallet-add-card-input-area-number":"Wallet_wallet-add-card-input-area-number__1Kg1n","wallet-add-card-input-area-expiration":"Wallet_wallet-add-card-input-area-expiration__3HL7Z","wallet-add-card-input-area-csc":"Wallet_wallet-add-card-input-area-csc__1zFGG","wallet-add-card-button":"Wallet_wallet-add-card-button__1gf_I","wallet-add-card-row-second":"Wallet_wallet-add-card-row-second__1hlGB","wallet-add-card-row-second-expiration":"Wallet_wallet-add-card-row-second-expiration__3WToh","wallet-add-card-row-second-expiration-input":"Wallet_wallet-add-card-row-second-expiration-input__2MZnd","wallet-add-card-row-second-csc":"Wallet_wallet-add-card-row-second-csc__1OWjS","wallet-add-card-input-error":"Wallet_wallet-add-card-input-error__1wYoN","wallet-add-card-expiration-input":"Wallet_wallet-add-card-expiration-input__cyPLR","wallet-add-card-label":"Wallet_wallet-add-card-label__3JJQd"}}},[[141,2,1]]]);
//# sourceMappingURL=main.0bbacdd7.chunk.js.map